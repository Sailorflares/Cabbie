<div class="container">
  <div class="row">
    
    <div class="col-md-6" style="margin:20px;">
      <h1><%= @driver.formatted_name %></h1>
      <h2>Medallion Number: <%= @driver.medallion_number %></h2><br>
    </div>

    <div class="col-md-5" style="margin:20px;">
      <br>
      <h3>Average Rating: <%=@driver.average_rating%></h3>
      <h3>Number of Reviews: <%= @driver.ride_reviews.size %></h3>
    </div>
  
  </div>
</div>


<div class="container">
  <div class="row">
    <div class="col-md-6" style="margin:20px;">
      <div class="well" style="height: 450px; width: 550px; overflow: auto;">
      <h2 style="text-align: center;">Reviews for <%= @driver.formatted_name %>:</h2><br>
        <% if @driver.ride_reviews.size == 0 %>
          <div class="row">
            <div class="col-md-10" style="display: inline-block; padding: 10px;">
              <div class="panel panel-primary">
                <div class="panel-body">
                  <h4>It looks like there are no reviews for <%= @driver.formatted_name %>.</h4><br>
                  <h4>Good news: you get to be the first one to review this driver!</h4>
                </div>
              </div>
            </div>
          </div>
        <% else %>
          <% @driver.ride_reviews.reverse.each do |rev| %>
            <div class="row">
              <div class="col-md-10" style="display: inline-block;">
                <div class="panel panel-primary">
                  <div class="panel-heading">
                    <h3 class="panel-title"><%= rev.user.name %> <%= rev.created_at.localtime.strftime("at %I:%M%p on %m/%d/%Y") %></h3>
                  </div>
                  <div class="panel-body">
                    <p>Rating: <%= rev.star_rating %></p>
                    <p>Review: <%= rev.comments %></p>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
    <% if current_user %>
      <div class="col-md-5" style="margin: 20px;">
        <h3>Write a Review for <%= @driver.formatted_name %>:</h3><br> 
        <%= form_for @ride_review, url: user_ride_reviews_path(@user) do |f| %>
          <p><%= f.number_field :star_rating, :placeholder => "Rate your driver", :autofocus => false%></p>
          <p><%= f.text_area(:comments, :placeholder => "Review your driver", :class => "form-control", :rows => 10)%></p>
               <%= f.hidden_field :driver_id, :value => @driver.id %>
          <%= f.submit 'Submit review!', :class => 'btn btn-primary' %>
        <% end %>
    <% else %>
      <div class="col-md-4" style="margin: 50px;">
        <a href="/login" button type="button" class="btn btn-primary btn-lg btn-block">Please log in to write a review</a></button>
      </div>
    <% end %>    
    </div>
  </div>
</div>